<?php
require('Panel/Security.php');
 try{         
    $conn = new PDO('mysql:host=localhost;dbname=university;charset=utf8;','root','');
}catch(Exception $e){
die('Erreur de connexion: '.$e->getMessage());
}

// Récupérer l'ID du cours à afficher
if(isset($_GET['id'])) {
    $idCours = $_GET['id'];

    // Requête pour récupérer les informations du cours depuis la base de données
    $getCours = $conn->prepare('SELECT name_lesson, lessons FROM lessons WHERE id_lesson = ?');
    $getCours->execute(array($idCours));

    // Vérifier si le cours existe
    if($getCours->rowCount() > 0) {
        $coursData = $getCours->fetch();
        $coursPath = $coursData['lessons'];
        $coursTitre = $coursData['name_lesson'];

        // Vérifier si le fichier existe physiquement
        if(file_exists($coursPath)) {
            // Afficher le titre du cours
            echo'<!doctype html>
            <html lang="en" data-bs-theme="auto">
              <head><script src="../assets/js/color-modes.js"></script>
            
                <meta charset="utf-8">
                <meta name="viewport" content="width=device-width, initial-scale=1">
                <meta name="description" content="">
                <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
                <meta name="generator" content="Hugo 0.112.5">
                <title>Pricing example · Bootstrap v5.3</title>
            
                <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/pricing/">
            
            <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
            
                <!-- Favicons -->
            <link rel="apple-touch-icon" href="/docs/5.3/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
            <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
            <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
            <link rel="manifest" href="/docs/5.3/assets/img/favicons/manifest.json">
            <link rel="mask-icon" href="/docs/5.3/assets/img/favicons/safari-pinned-tab.svg" color="#712cf9">
            <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon.ico">
            <meta name="theme-color" content="#712cf9">
            <script src="https://kit.fontawesome.com/e147eaff6b.js" crossorigin="anonymous"></script>
            
            
                <style>
                    .profil{
                  width: 45px;
                  height: 45px;
                  border-radius: 50%;
                  box-shadow: 1px 0 3px;
                }
                  .bd-placeholder-img {
                    font-size: 1.125rem;
                    text-anchor: middle;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    user-select: none;
                  }
            
                  @media (min-width: 768px) {
                    .bd-placeholder-img-lg {
                      font-size: 3.5rem;
                    }
                  }
            
                  .b-example-divider {
                    width: 100%;
                    height: 3rem;
                    background-color: rgba(0, 0, 0, .1);
                    border: solid rgba(0, 0, 0, .15);
                    border-width: 1px 0;
                    box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
                  }
            
                  .b-example-vr {
                    flex-shrink: 0;
                    width: 1.5rem;
                    height: 100vh;
                  }
            
                  .bi {
                    vertical-align: -.125em;
                    fill: currentColor;
                  }
            
                  .nav-scroller {
                    position: relative;
                    z-index: 2;
                    height: 2.75rem;
                    overflow-y: hidden;
                  }
            
                  .nav-scroller .nav {
                    display: flex;
                    flex-wrap: nowrap;
                    padding-bottom: 1rem;
                    margin-top: -1px;
                    overflow-x: auto;
                    text-align: center;
                    white-space: nowrap;
                    -webkit-overflow-scrolling: touch;
                  }
            
                  .btn-bd-primary {
                    --bd-violet-bg: #712cf9;
                    --bd-violet-rgb: 112.520718, 44.062154, 249.437846;
            
                    --bs-btn-font-weight: 600;
                    --bs-btn-color: var(--bs-white);
                    --bs-btn-bg: var(--bd-violet-bg);
                    --bs-btn-border-color: var(--bd-violet-bg);
                    --bs-btn-hover-color: var(--bs-white);
                    --bs-btn-hover-bg: #6528e0;
                    --bs-btn-hover-border-color: #6528e0;
                    --bs-btn-focus-shadow-rgb: var(--bd-violet-rgb);
                    --bs-btn-active-color: var(--bs-btn-hover-color);
                    --bs-btn-active-bg: #5a23c8;
                    --bs-btn-active-border-color: #5a23c8;
                  }
                  .bd-mode-toggle {
                    z-index: 1500;
                  }
                </style>
            
                
                <!-- Custom styles for this template -->
                <link href="../assets/pricing.css" rel="stylesheet">
              </head>
              <body>
            
            <div class="container py-3">
              <header>
                <div class="d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom">
                  <a href="index.php" class="d-flex align-items-center link-body-emphasis text-decoration-none">
                  <img class="d-block mx-auto me-3" src="https://cdn-icons-png.flaticon.com/128/669/669698.png" alt="" width="65" height="55">
                  <span class="fs-4 fw-bold me-3">Etando School</span>
                  </a>
            
                  <  <nav class="d-inline-flex mt-2 mt-md-0 ms-md-auto">
                    <a class="me-3 py-2 link-body-emphasis text-decoration-none dropdown-toggle" href="#" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fa fa-regular fa-user">
                    </i> '. $_SESSION['firstname'].' ' .$_SESSION['lastname'] .'<img src="../'.$_SESSION['profil'].'" alt="" class="profil"> </a>
                    <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
                <hr>
                <li><a class="dropdown-item text-danger" href="Panel/logoutStudent.php">Logout</a></li>
            
              </ul>
                  </nav>
                </div>
            
                <div class="pricing-header p-3 pb-md-4 mx-auto text-center">
                  <h1 class="display-4 fw-normal text-body-emphasis">My Lessons</h1>
                  <p class="fs-5 text-body-secondary">Quickly build an effective pricing table for your potential customers with this Bootstrap example. It’s built with default Bootstrap components and utilities with little customization.</p>
                </div>
              </header> ';
            echo '<h2>' . $coursTitre . '</h2>';

            // Afficher un lien de téléchargement
            echo '<a href="' . $coursPath . '" download>Télécharger le cours</a><br>';

            // Afficher le contenu du cours en utilisant un iframe
            echo '<iframe src="' . $coursPath . '" width="90%" height="555px"></iframe>';
            echo' <footer class="pt-4 my-md-5 pt-md-5 border-top">
            <div class="row">
              <div class="col-12 col-md">
                <img class="mb-2" src="https://cdn-icons-png.flaticon.com/128/669/669698.png" alt="" width="65" height="55">
                <small class="d-block mb-3 text-body-secondary">&copy; 2017–2023</small>
              </div>
              <div class="col-6 col-md">
                <h5>Features</h5>
                <ul class="list-unstyled text-small">
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Cool stuff</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Random feature</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Team feature</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Stuff for developers</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Another one</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Last time</a></li>
                </ul>
              </div>
              <div class="col-6 col-md">
                <h5>Resources</h5>
                <ul class="list-unstyled text-small">
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Resource</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Resource name</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Another resource</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Final resource</a></li>
                </ul>
              </div>
              <div class="col-6 col-md">
                <h5>About</h5>
                <ul class="list-unstyled text-small">
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Team</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Locations</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Privacy</a></li>
                  <li class="mb-1"><a class="link-secondary text-decoration-none" href="#">Terms</a></li>
                </ul>
              </div>
            </div>
          </footer>
        </div>
        <script src="../assets/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
        
            </body>
        </html>
        ';
        } else {
            echo 'Le fichier du cours est introuvable.';
        }
    } else {
        echo 'Le cours demandé n\'existe pas.';
    }
} else {
    echo 'Aucun cours spécifié.';
}
?>
