<li><a class="dropdown-item" href="#">By program</a></li>
                            <li><a class="dropdown-item" href="AdminLogin.php">By Nationality</a></li>
                            -----------------------------
                            <?php
try {
    $conn = new PDO('mysql:host=localhost;dbname=university;charset=utf8;', 'root', '');
} catch (Exception $e) {
    die('Erreur de connexion: ' . $e->getMessage());
}

$pageSize = 5; // Nombre d'éléments par page
$page = isset($_GET['page']) ? intval($_GET['page']) : 1; // Numéro de page courante, par défaut la première page

// Compter le nombre total d'étudiants
$countQuery = $conn->prepare('SELECT COUNT(*) AS total FROM students WHERE session_year = ?');
$countQuery->execute(array($_SESSION['year']));
$totalStudents = $countQuery->fetch()['total'];

// Calculer le nombre total de pages
$totalPages = ceil($totalStudents / $pageSize);

// Limiter la requête pour obtenir uniquement les étudiants de la page courante
$offset = ($page - 1) * $pageSize;
$studentsQuery = $conn->prepare('SELECT * FROM students WHERE session_year = ? ORDER BY id_student DESC LIMIT ?, ?');
$studentsQuery->bindValue(1, $_SESSION['year'], PDO::PARAM_STR);
$studentsQuery->bindValue(2, $offset, PDO::PARAM_INT);
$studentsQuery->bindValue(3, $pageSize, PDO::PARAM_INT);
$studentsQuery->execute();
$students = $studentsQuery->fetchAll();
?>


------------------------------------
<form class="row g-3 needs-validation" method="post" enctype="multipart/form-data">
                        <div class="col-md-6">
                            <label for="validationCustom04" class="form-label">Courses</label>
                            <select class="form-select" name="programss" >
                            <?php while($programs = $AllProgram->fetch()){ ?>
                                <option value="<?= $programs['name_prog'] ?>"><?= $programs['name_prog'] ?></option>
                                <?php } ?>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="validationCustom01" class="form-label">Name lessons</label>
                            <input type="text" name="fnamess" class="form-control" placeholder="etando school" >
                        </div>
                        <div class="col-md-9">
                            <label for="validationCustom05" class="form-label">lessons</label>
                            <input type="file" name="profilss" class="form-control">
                        </div>
                        <div class="d-grid gap-2 col-6 mx-auto mt-5">
                            <button class="btn btn-success" name="addss" type="submit">New Lessons</button>
                        </div>
                </form>-
--------------------------------------------------------------------------
<?php 
try {         
    $conn = new PDO('mysql:host=localhost;dbname=university;charset=utf8;', 'root', '');
} catch(Exception $e) {
    die('Erreur de connexion: '.$e->getMessage());
}

// Récupérer le nom du cours
if(isset($_GET['id']) && !empty($_GET['id'])) {
    $IdTheCourse = $_GET['id'];

    // Récupérer toutes les leçons qui appartiennent au cours avec l'ID de l'URL
    $getAllLessons = $conn->prepare('SELECT id_lesson, name_lesson, lessons FROM lessons WHERE id_courses = ?');
    $getAllLessons->execute(array($IdTheCourse));

    // Vérifier s'il y a des leçons disponibles
    if($getAllLessons->rowCount() > 0) {
        while($lessonsData = $getAllLessons->fetch()) { // Déplacer cette ligne à l'intérieur de la condition if
            // Obtenir l'extension du fichier
            $extension = pathinfo($lessonsData['lessons'], PATHINFO_EXTENSION);

            // Déterminer l'image correspondante à l'extension du fichier
            $image = '';
            switch($extension) {
                case 'pdf':
                    $image = 'pdf.png';
                    break;
                case 'pptx':
                    $image = 'pptx.png';
                    break;
                case 'docx':
                    $image = 'word.png';
                    break;
                default:
                    $image = 'default.png'; // Image par défaut pour les autres types de fichiers
                    break;
            }
?>
<div class="mb-3" style="max-width: 540px;">
    <div class="row g-0">
        <div class="col-md-2">
            <img src="../../images/<?= $image ?>" alt="<?= $extension ?>" class="img-fluid rounded-start" height="50" width="50" alt="...">
        </div>
        <div class="col-md-4">
            <a href="My-Lessons.php?id=<?= $lessonsData['id_lesson'] ?>">
                <div class="card-body">
                    <h5 class="card-title"><?= $lessonsData['name_lesson'] ?></h5>
                </div>
            </a>
        </div>
    </div>
</div>
<?php
        }
    } else {
        echo 'Aucune leçon disponible.';
    }
}
?>
